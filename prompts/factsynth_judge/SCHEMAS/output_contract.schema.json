{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "FactSynth Judge Output",
  "type": "object",
  "required": [
    "CLAIMS",
    "EVIDENCE",
    "VERDICT",
    "NORMALIZATION",
    "CONFLICTS",
    "HYPOTHESIS",
    "EVIDENCE_GAP",
    "METRICS"
  ],
  "properties": {
    "CLAIMS": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["text", "type", "normalized"],
        "properties": {
          "text": { "type": "string" },
          "type": {
            "type": "string",
            "enum": ["fact", "number", "date", "definition", "attribution"]
          },
          "normalized": {
            "type": "object",
            "required": ["entities", "numbers", "dates"],
            "properties": {
              "entities": { "type": "array", "items": { "type": "string" } },
              "numbers": { "type": "array" },
              "dates": { "type": "array", "items": { "type": "string" } }
            }
          }
        }
      }
    },
    "EVIDENCE": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "claim_index",
          "support",
          "rationale",
          "spans",
          "confidence"
        ],
        "properties": {
          "claim_index": { "type": "integer" },
          "support": {
            "type": "string",
            "enum": ["supports", "refutes", "insufficient"]
          },
          "rationale": { "type": "string" },
          "spans": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["source", "lines"],
              "properties": {
                "source": { "type": "string" },
                "lines": { "type": "string" }
              }
            }
          },
          "confidence": {
            "type": "string",
            "enum": ["certain", "likely", "possible", "unknown"]
          }
        }
      }
    },
    "VERDICT": {
      "type": "string",
      "enum": [
        "confirmed",
        "refuted",
        "mixed",
        "not_enough_evidence",
        "not_a_fact"
      ]
    },
    "NORMALIZATION": { "type": "string" },
    "CONFLICTS": { "type": "array", "items": { "type": "string" } },
    "HYPOTHESIS": { "type": "string" },
    "EVIDENCE_GAP": { "type": "array", "items": { "type": "string" } },
    "METRICS": {
      "type": "object",
      "required": [
        "latency_ms",
        "claims_total",
        "claims_confirmed",
        "claims_refuted",
        "claims_mixed",
        "claims_not_enough_evidence",
        "claims_not_a_fact",
        "calibration_hint"
      ],
      "properties": {
        "latency_ms": { "type": "number" },
        "claims_total": { "type": "integer" },
        "claims_confirmed": { "type": "integer" },
        "claims_refuted": { "type": "integer" },
        "claims_mixed": { "type": "integer" },
        "claims_not_enough_evidence": { "type": "integer" },
        "claims_not_a_fact": { "type": "integer" },
        "calibration_hint": { "type": "string" }
      }
    }
  },
  "additionalProperties": false
}
