openapi: 3.0.3
info: { title: FactSynthLock, version: "1.0.0" }
components:
  schemas:
    FactSynthVerdict:
      type: object
      required: [status, confidence, summary]
      properties:
        status: { type: string, enum: [SUPPORTED, REFUTED, UNCLEAR, OUT_OF_SCOPE, ERROR] }
        confidence: { type: number, minimum: 0, maximum: 1 }
        summary: { type: string, maxLength: 300 }
    FactSynthCitation:
      type: object
      required: [id, source, snippet, relevance, date, url]
      properties:
        id: { type: string }
        source: { type: string }
        snippet: { type: string, maxLength: 500 }
        relevance: { type: number, minimum: 0, maximum: 1 }
        date: { type: string, format: date }
        url: { type: string, format: uri }
    FactSynthTrace:
      type: object
      required: [retrieval_query, justification_steps, assumptions]
      properties:
        retrieval_query: { type: string, maxLength: 500 }
        justification_steps:
          type: array
          minItems: 3
          maxItems: 7
          items: { type: string, maxLength: 200 }
        assumptions:
          type: array
          maxItems: 10
          items: { type: string, maxLength: 200 }
    FactSynthRecommendations:
      type: object
      required: [next_query_suggestion, manual_review]
      properties:
        next_query_suggestion: { type: string, maxLength: 200 }
        gaps_identified:
          type: array
          maxItems: 10
          items: { type: string, maxLength: 200 }
        manual_review: { type: boolean }
    FactSynthLock:
      type: object
      required: [verdict, source_synthesis, traceability, recommendations]
      properties:
        verdict: { $ref: '#/components/schemas/FactSynthVerdict' }
        source_synthesis:
          type: object
          required: [key_findings, citations]
          properties:
            key_findings: { type: string, maxLength: 1000 }
            citations:
              type: array
              minItems: 1
              items: { $ref: '#/components/schemas/FactSynthCitation' }
        traceability: { $ref: '#/components/schemas/FactSynthTrace' }
        recommendations: { $ref: '#/components/schemas/FactSynthRecommendations' }
